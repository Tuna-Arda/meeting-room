{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import{getReservationById,createReservation,updateReservation,getAllRooms}from\"../services/apiService\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ReservationForm(){const[roomId,setRoomId]=useState(\"\");const[startTime,setStartTime]=useState(\"\");const[endTime,setEndTime]=useState(\"\");const[reservedBy,setReservedBy]=useState(\"\");const[purpose,setPurpose]=useState(\"\");const[rooms,setRooms]=useState([]);const{id}=useParams();// Reservation ID\nconst navigate=useNavigate();useEffect(()=>{// Räume laden\ngetAllRooms().then(data=>setRooms(data)).catch(err=>console.error(err));if(id){// Reservierung laden (zum Editieren)\ngetReservationById(id).then(res=>{setRoomId(res.roomId);setStartTime(res.startTime);setEndTime(res.endTime);setReservedBy(res.reservedBy);setPurpose(res.purpose);}).catch(err=>console.error(err));}},[id]);function handleSubmit(e){e.preventDefault();// Kurze Plausibilitätsprüfung\nif(!roomId){alert(\"Bitte einen Raum auswählen!\");return;}if(!startTime||!endTime){alert(\"Bitte Start- und Endzeit angeben!\");return;}if(new Date(startTime)>=new Date(endTime)){alert(\"Endzeit muss nach Startzeit liegen!\");return;}const reservation={roomId,startTime,endTime,reservedBy,purpose};if(id){updateReservation(id,reservation).then(()=>navigate(\"/reservations\")).catch(err=>alert(err.message));}else{createReservation(reservation).then(()=>navigate(\"/reservations\")).catch(err=>alert(err.message));}}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:id?\"Reservierung bearbeiten\":\"Neue Reservierung anlegen\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Raum:\"}),/*#__PURE__*/_jsxs(\"select\",{value:roomId,onChange:e=>setRoomId(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Raum ausw\\xE4hlen --\"}),rooms.map(r=>/*#__PURE__*/_jsx(\"option\",{value:r.id,children:r.name},r.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Startzeit:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",value:startTime,onChange:e=>setStartTime(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Endzeit:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",value:endTime,onChange:e=>setEndTime(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Reserviert von:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:reservedBy,onChange:e=>setReservedBy(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Zweck:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:purpose,onChange:e=>setPurpose(e.target.value)})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Speichern\"})]})]});}","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","getReservationById","createReservation","updateReservation","getAllRooms","jsx","_jsx","jsxs","_jsxs","ReservationForm","roomId","setRoomId","startTime","setStartTime","endTime","setEndTime","reservedBy","setReservedBy","purpose","setPurpose","rooms","setRooms","id","navigate","then","data","catch","err","console","error","res","handleSubmit","e","preventDefault","alert","Date","reservation","message","children","onSubmit","value","onChange","target","map","r","name","type"],"sources":["C:/Users/erzincansivas/Documents/Intensivwoche2/Frontend/src/pages/ReservationForm.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport {\n  getReservationById,\n  createReservation,\n  updateReservation,\n  getAllRooms\n} from \"../services/apiService\";\n\nexport default function ReservationForm() {\n  const [roomId, setRoomId] = useState(\"\");\n  const [startTime, setStartTime] = useState(\"\");\n  const [endTime, setEndTime] = useState(\"\");\n  const [reservedBy, setReservedBy] = useState(\"\");\n  const [purpose, setPurpose] = useState(\"\");\n  const [rooms, setRooms] = useState([]);\n\n  const { id } = useParams(); // Reservation ID\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    // Räume laden\n    getAllRooms()\n      .then(data => setRooms(data))\n      .catch(err => console.error(err));\n\n    if (id) {\n      // Reservierung laden (zum Editieren)\n      getReservationById(id)\n        .then(res => {\n          setRoomId(res.roomId);\n          setStartTime(res.startTime);\n          setEndTime(res.endTime);\n          setReservedBy(res.reservedBy);\n          setPurpose(res.purpose);\n        })\n        .catch(err => console.error(err));\n    }\n  }, [id]);\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    // Kurze Plausibilitätsprüfung\n    if (!roomId) {\n      alert(\"Bitte einen Raum auswählen!\");\n      return;\n    }\n    if (!startTime || !endTime) {\n      alert(\"Bitte Start- und Endzeit angeben!\");\n      return;\n    }\n    if (new Date(startTime) >= new Date(endTime)) {\n      alert(\"Endzeit muss nach Startzeit liegen!\");\n      return;\n    }\n\n    const reservation = {\n      roomId,\n      startTime,\n      endTime,\n      reservedBy,\n      purpose\n    };\n\n    if (id) {\n      updateReservation(id, reservation)\n        .then(() => navigate(\"/reservations\"))\n        .catch(err => alert(err.message));\n    } else {\n      createReservation(reservation)\n        .then(() => navigate(\"/reservations\"))\n        .catch(err => alert(err.message));\n    }\n  }\n\n  return (\n    <div>\n      <h2>\n        {id ? \"Reservierung bearbeiten\" : \"Neue Reservierung anlegen\"}\n      </h2>\n      <form onSubmit={handleSubmit}>\n        <div>\n          <label>Raum:</label>\n          <select\n            value={roomId}\n            onChange={e => setRoomId(e.target.value)}\n          >\n            <option value=\"\">-- Raum auswählen --</option>\n            {rooms.map(r => (\n              <option key={r.id} value={r.id}>\n                {r.name}\n              </option>\n            ))}\n          </select>\n        </div>\n\n        <div>\n          <label>Startzeit:</label>\n          <input\n            type=\"datetime-local\"\n            value={startTime}\n            onChange={e => setStartTime(e.target.value)}\n          />\n        </div>\n\n        <div>\n          <label>Endzeit:</label>\n          <input\n            type=\"datetime-local\"\n            value={endTime}\n            onChange={e => setEndTime(e.target.value)}\n          />\n        </div>\n\n        <div>\n          <label>Reserviert von:</label>\n          <input\n            type=\"text\"\n            value={reservedBy}\n            onChange={e => setReservedBy(e.target.value)}\n          />\n        </div>\n\n        <div>\n          <label>Zweck:</label>\n          <input\n            type=\"text\"\n            value={purpose}\n            onChange={e => setPurpose(e.target.value)}\n          />\n        </div>\n\n        <button type=\"submit\">Speichern</button>\n      </form>\n    </div>\n  );\n}\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,SAAS,CAAEC,WAAW,KAAQ,kBAAkB,CACzD,OACEC,kBAAkB,CAClBC,iBAAiB,CACjBC,iBAAiB,CACjBC,WAAW,KACN,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEhC,cAAe,SAAS,CAAAC,eAAeA,CAAA,CAAG,CACxC,KAAM,CAACC,MAAM,CAAEC,SAAS,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACc,SAAS,CAAEC,YAAY,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACgB,OAAO,CAAEC,UAAU,CAAC,CAAGjB,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACkB,UAAU,CAAEC,aAAa,CAAC,CAAGnB,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAACoB,OAAO,CAAEC,UAAU,CAAC,CAAGrB,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACsB,KAAK,CAAEC,QAAQ,CAAC,CAAGvB,QAAQ,CAAC,EAAE,CAAC,CAEtC,KAAM,CAAEwB,EAAG,CAAC,CAAGvB,SAAS,CAAC,CAAC,CAAE;AAC5B,KAAM,CAAAwB,QAAQ,CAAGvB,WAAW,CAAC,CAAC,CAE9BH,SAAS,CAAC,IAAM,CACd;AACAO,WAAW,CAAC,CAAC,CACVoB,IAAI,CAACC,IAAI,EAAIJ,QAAQ,CAACI,IAAI,CAAC,CAAC,CAC5BC,KAAK,CAACC,GAAG,EAAIC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC,CAAC,CAEnC,GAAIL,EAAE,CAAE,CACN;AACArB,kBAAkB,CAACqB,EAAE,CAAC,CACnBE,IAAI,CAACM,GAAG,EAAI,CACXnB,SAAS,CAACmB,GAAG,CAACpB,MAAM,CAAC,CACrBG,YAAY,CAACiB,GAAG,CAAClB,SAAS,CAAC,CAC3BG,UAAU,CAACe,GAAG,CAAChB,OAAO,CAAC,CACvBG,aAAa,CAACa,GAAG,CAACd,UAAU,CAAC,CAC7BG,UAAU,CAACW,GAAG,CAACZ,OAAO,CAAC,CACzB,CAAC,CAAC,CACDQ,KAAK,CAACC,GAAG,EAAIC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC,CAAC,CACrC,CACF,CAAC,CAAE,CAACL,EAAE,CAAC,CAAC,CAER,QAAS,CAAAS,YAAYA,CAACC,CAAC,CAAE,CACvBA,CAAC,CAACC,cAAc,CAAC,CAAC,CAElB;AACA,GAAI,CAACvB,MAAM,CAAE,CACXwB,KAAK,CAAC,6BAA6B,CAAC,CACpC,OACF,CACA,GAAI,CAACtB,SAAS,EAAI,CAACE,OAAO,CAAE,CAC1BoB,KAAK,CAAC,mCAAmC,CAAC,CAC1C,OACF,CACA,GAAI,GAAI,CAAAC,IAAI,CAACvB,SAAS,CAAC,EAAI,GAAI,CAAAuB,IAAI,CAACrB,OAAO,CAAC,CAAE,CAC5CoB,KAAK,CAAC,qCAAqC,CAAC,CAC5C,OACF,CAEA,KAAM,CAAAE,WAAW,CAAG,CAClB1B,MAAM,CACNE,SAAS,CACTE,OAAO,CACPE,UAAU,CACVE,OACF,CAAC,CAED,GAAII,EAAE,CAAE,CACNnB,iBAAiB,CAACmB,EAAE,CAAEc,WAAW,CAAC,CAC/BZ,IAAI,CAAC,IAAMD,QAAQ,CAAC,eAAe,CAAC,CAAC,CACrCG,KAAK,CAACC,GAAG,EAAIO,KAAK,CAACP,GAAG,CAACU,OAAO,CAAC,CAAC,CACrC,CAAC,IAAM,CACLnC,iBAAiB,CAACkC,WAAW,CAAC,CAC3BZ,IAAI,CAAC,IAAMD,QAAQ,CAAC,eAAe,CAAC,CAAC,CACrCG,KAAK,CAACC,GAAG,EAAIO,KAAK,CAACP,GAAG,CAACU,OAAO,CAAC,CAAC,CACrC,CACF,CAEA,mBACE7B,KAAA,QAAA8B,QAAA,eACEhC,IAAA,OAAAgC,QAAA,CACGhB,EAAE,CAAG,yBAAyB,CAAG,2BAA2B,CAC3D,CAAC,cACLd,KAAA,SAAM+B,QAAQ,CAAER,YAAa,CAAAO,QAAA,eAC3B9B,KAAA,QAAA8B,QAAA,eACEhC,IAAA,UAAAgC,QAAA,CAAO,OAAK,CAAO,CAAC,cACpB9B,KAAA,WACEgC,KAAK,CAAE9B,MAAO,CACd+B,QAAQ,CAAET,CAAC,EAAIrB,SAAS,CAACqB,CAAC,CAACU,MAAM,CAACF,KAAK,CAAE,CAAAF,QAAA,eAEzChC,IAAA,WAAQkC,KAAK,CAAC,EAAE,CAAAF,QAAA,CAAC,yBAAoB,CAAQ,CAAC,CAC7ClB,KAAK,CAACuB,GAAG,CAACC,CAAC,eACVtC,IAAA,WAAmBkC,KAAK,CAAEI,CAAC,CAACtB,EAAG,CAAAgB,QAAA,CAC5BM,CAAC,CAACC,IAAI,EADID,CAAC,CAACtB,EAEP,CACT,CAAC,EACI,CAAC,EACN,CAAC,cAENd,KAAA,QAAA8B,QAAA,eACEhC,IAAA,UAAAgC,QAAA,CAAO,YAAU,CAAO,CAAC,cACzBhC,IAAA,UACEwC,IAAI,CAAC,gBAAgB,CACrBN,KAAK,CAAE5B,SAAU,CACjB6B,QAAQ,CAAET,CAAC,EAAInB,YAAY,CAACmB,CAAC,CAACU,MAAM,CAACF,KAAK,CAAE,CAC7C,CAAC,EACC,CAAC,cAENhC,KAAA,QAAA8B,QAAA,eACEhC,IAAA,UAAAgC,QAAA,CAAO,UAAQ,CAAO,CAAC,cACvBhC,IAAA,UACEwC,IAAI,CAAC,gBAAgB,CACrBN,KAAK,CAAE1B,OAAQ,CACf2B,QAAQ,CAAET,CAAC,EAAIjB,UAAU,CAACiB,CAAC,CAACU,MAAM,CAACF,KAAK,CAAE,CAC3C,CAAC,EACC,CAAC,cAENhC,KAAA,QAAA8B,QAAA,eACEhC,IAAA,UAAAgC,QAAA,CAAO,iBAAe,CAAO,CAAC,cAC9BhC,IAAA,UACEwC,IAAI,CAAC,MAAM,CACXN,KAAK,CAAExB,UAAW,CAClByB,QAAQ,CAAET,CAAC,EAAIf,aAAa,CAACe,CAAC,CAACU,MAAM,CAACF,KAAK,CAAE,CAC9C,CAAC,EACC,CAAC,cAENhC,KAAA,QAAA8B,QAAA,eACEhC,IAAA,UAAAgC,QAAA,CAAO,QAAM,CAAO,CAAC,cACrBhC,IAAA,UACEwC,IAAI,CAAC,MAAM,CACXN,KAAK,CAAEtB,OAAQ,CACfuB,QAAQ,CAAET,CAAC,EAAIb,UAAU,CAACa,CAAC,CAACU,MAAM,CAACF,KAAK,CAAE,CAC3C,CAAC,EACC,CAAC,cAENlC,IAAA,WAAQwC,IAAI,CAAC,QAAQ,CAAAR,QAAA,CAAC,WAAS,CAAQ,CAAC,EACpC,CAAC,EACJ,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}